var inputChecker = require('inputcheck').InputChecker;

var ic = new inputChecker('wyatt', 'output');

ic.on('write', function(data) {
  this.writeStream.write(data, 'utf8');
});

ic.on('echo', function(data) {
  process.stdout.write(ic.name + ' wrote ' + data);
});

ic.on('end', function() {
  process.exit();
});

// capture input after setting encoding
process.stdin.setEncoding('utf8');
process.stdin.on('readable', function() {
  let input = process.stdin.read();
  if (input !== null) {
    ic.check(input);
  }
})
